<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>actxps – expstats</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body class="nav-sidebar floating nav-fixed">


<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">actxps</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../articles/actxps.html" rel="" target="">
 <span class="menu-text">Get started</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="../reference/index.html" rel="" target="" aria-current="page">
 <span class="menu-text">Reference</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-articles" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Articles</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-articles">    
        <li>
    <a class="dropdown-item" href="../articles/exposures.html" rel="" target="">
 <span class="dropdown-text">Exposure calculations</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../articles/exp_summary.html" rel="" target="">
 <span class="dropdown-text">Experience summaries</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../articles/transactions.html" rel="" target="">
 <span class="dropdown-text">Transaction studies</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../articles/visualizations.html" rel="" target="">
 <span class="dropdown-text">Data visualizations</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../articles/misc.html" rel="" target="">
 <span class="dropdown-text">Other functions</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../changelog.html" rel="" target="">
 <span class="menu-text">Changelog</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/mattheaphy/actxpspy" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-bi-r-circle-fill" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
      <i class="bi bi-r-circle-fill" role="img">
</i> 
 <span class="menu-text"></span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-bi-r-circle-fill">    
        <li class="dropdown-header">R version of actxps</li>
        <li>
    <a class="dropdown-item" href="https://github.com/mattheaphy/actxps" rel="" target="">
 <span class="dropdown-text">Source code</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://mattheaphy.github.io/actxps" rel="" target="">
 <span class="dropdown-text">Package documentation</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../reference/ExposedDF.exp_stats.html">Termination studies</a></li><li class="breadcrumb-item"><a href="../reference/ExpStats.html">ExpStats</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Function reference</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Exposure calculations</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/ExposedDF.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ExposedDF</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/ExposedDF.from_DataFrame.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ExposedDF.from_DataFrame</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/SplitExposedDF.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">SplitExposedDF</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Termination studies</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/ExposedDF.exp_stats.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ExposedDF.exp_stats</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/ExpStats.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">ExpStats</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">Transaction studies</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/ExposedDF.add_transactions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ExposedDF.add_transactions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/TrxStats.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">TrxStats</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text">Shiny app</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/exp_shiny.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">exp_shiny</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
 <span class="menu-text">Sample data sets</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="false">
 <span class="menu-text">Toy census data</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/load_toy_census.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">load_toy_census</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="false">
 <span class="menu-text">Simulated annuity data</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/sim_data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">load_census_dat</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="false">
 <span class="menu-text">2012 Individual Annuity Mortality Table and Projection Scale G2</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/qx_iamb.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">load_qx_iamb</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="true">
 <span class="menu-text">Date functions</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" aria-expanded="false">
 <span class="menu-text">Policy duration functions</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-10" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/pol_durations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">pol_interval</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" aria-expanded="false">
 <span class="menu-text">Fractional duration functions</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-11" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/frac_durations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">frac_interval</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#parameters" id="toc-parameters" class="nav-link active" data-scroll-target="#parameters">Parameters</a></li>
  <li><a href="#attributes" id="toc-attributes" class="nav-link" data-scroll-target="#attributes">Attributes</a></li>
  <li><a href="#notes" id="toc-notes" class="nav-link" data-scroll-target="#notes">Notes</a></li>
  <li><a href="#see-also" id="toc-see-also" class="nav-link" data-scroll-target="#see-also">See Also</a></li>
  <li><a href="#methods" id="toc-methods" class="nav-link" data-scroll-target="#methods">Methods</a>
  <ul class="collapse">
  <li><a href="#actxps.exp_stats.ExpStats.from_DataFrame" id="toc-actxps.exp_stats.ExpStats.from_DataFrame" class="nav-link" data-scroll-target="#actxps.exp_stats.ExpStats.from_DataFrame">from_DataFrame</a></li>
  <li><a href="#actxps.exp_stats.ExpStats.plot" id="toc-actxps.exp_stats.ExpStats.plot" class="nav-link" data-scroll-target="#actxps.exp_stats.ExpStats.plot">plot</a></li>
  <li><a href="#actxps.exp_stats.ExpStats.plot_actual_to_expected" id="toc-actxps.exp_stats.ExpStats.plot_actual_to_expected" class="nav-link" data-scroll-target="#actxps.exp_stats.ExpStats.plot_actual_to_expected">plot_actual_to_expected</a></li>
  <li><a href="#actxps.exp_stats.ExpStats.plot_termination_rates" id="toc-actxps.exp_stats.ExpStats.plot_termination_rates" class="nav-link" data-scroll-target="#actxps.exp_stats.ExpStats.plot_termination_rates">plot_termination_rates</a></li>
  <li><a href="#actxps.exp_stats.ExpStats.summary" id="toc-actxps.exp_stats.ExpStats.summary" class="nav-link" data-scroll-target="#actxps.exp_stats.ExpStats.summary">summary</a></li>
  <li><a href="#actxps.exp_stats.ExpStats.table" id="toc-actxps.exp_stats.ExpStats.table" class="nav-link" data-scroll-target="#actxps.exp_stats.ExpStats.table">table</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">ExpStats</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p><code>exp_stats.ExpStats(self, expo, target_status=None, expected=None, wt=None, conf_int=False, credibility=False, conf_level=0.95, cred_r=0.05, col_exposure='exposure')</code></p>
<p>Experience study summary class</p>
<p>Create a summary of termination experience for a given target status (an <code>ExpStats</code> object).</p>
<p>Typically, the <code>ExpStats</code> class constructor should not be called directly. The preferred method for creating an <code>ExpStats</code> object is to call the <code>exp_stats()</code> method on an <code>ExposedDF</code> object.</p>
<section id="parameters" class="level2">
<h2 class="anchored" data-anchor-id="parameters">Parameters</h2>
<table class="table">
<colgroup>
<col style="width: 8%">
<col style="width: 16%">
<col style="width: 68%">
<col style="width: 6%">
</colgroup>
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>expo</code></td>
<td>actxps.expose.ExposedDF</td>
<td>An exposed data frame class</td>
<td><em>required</em></td>
</tr>
<tr class="even">
<td><code>target_status</code></td>
<td>str | list | numpy.numpy.ndarray</td>
<td>A single string, list, or array of target status values</td>
<td><code>None</code></td>
</tr>
<tr class="odd">
<td><code>expected</code></td>
<td>str | list | numpy.numpy.ndarray</td>
<td>Single string, list, or array of column names in the <code>data</code> property of <code>expo</code> with expected values</td>
<td><code>None</code></td>
</tr>
<tr class="even">
<td><code>wt</code></td>
<td>str</td>
<td>Name of the column in the <code>data</code> property of <code>expo</code> containing weights to use in the calculation of claims, exposures, and partial credibility.</td>
<td><code>None</code></td>
</tr>
<tr class="odd">
<td><code>conf_int</code></td>
<td>bool</td>
<td>If <code>True</code>, the output will include confidence intervals around the observed termination rates and any actual-to-expected ratios.</td>
<td><code>False</code></td>
</tr>
<tr class="even">
<td><code>credibility</code></td>
<td>bool</td>
<td>Whether the output should include partial credibility weights and credibility-weighted decrement rates.</td>
<td><code>False</code></td>
</tr>
<tr class="odd">
<td><code>conf_level</code></td>
<td>float</td>
<td>Confidence level under the Limited Fluctuation credibility method and confidence intervals</td>
<td><code>0.95</code></td>
</tr>
<tr class="even">
<td><code>cred_r</code></td>
<td>float</td>
<td>Error tolerance under the Limited Fluctuation credibility method</td>
<td><code>0.05</code></td>
</tr>
<tr class="odd">
<td><code>col_exposure</code></td>
<td>str</td>
<td>Name of the column in <code>data</code> containing exposures.</td>
<td><code>'exposure'</code></td>
</tr>
</tbody>
</table>
</section>
<section id="attributes" class="level2">
<h2 class="anchored" data-anchor-id="attributes">Attributes</h2>
<table class="table">
<colgroup>
<col style="width: 12%">
<col style="width: 4%">
<col style="width: 83%">
</colgroup>
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>data</td>
<td>polars.polars.DataFrame</td>
<td>A data frame containing experience study summary results that includes columns for any grouping variables, claims, exposures, and observed decrement rates (<code>q_obs</code>). If any values are passed to <code>expected</code>, additional columns will be added for expected decrements and actual-to-expected ratios. If <code>credibility</code> is set to <code>True</code>, additional columns are added for partial credibility and credibility-weighted decrement rates (assuming values are passed to <code>expected</code>).</td>
</tr>
<tr class="even">
<td>target_status, groups, start_date, end_date, expected, wt, xp_params</td>
<td></td>
<td>Metadata about the experience study inferred from the <code>ExposedDF</code> object (<code>expo</code>) or passed directly to <code>ExpStats</code>.</td>
</tr>
</tbody>
</table>
</section>
<section id="notes" class="level2">
<h2 class="anchored" data-anchor-id="notes">Notes</h2>
<p>If <code>expo</code> is grouped (see the <code>ExposedDF.group_by()</code> method), the returned <code>ExpStats</code> object’s data will contain one row per group.</p>
<p>If nothing is passed to <code>target_status</code>, the <code>target_status</code> property of <code>expo</code> will be used. If that property is <code>None</code>, all status values except the first level will be assumed. This will produce a warning message.</p>
<p><strong>Expected values</strong></p>
<p>The <code>expected</code> argument is optional. If provided, this argument must be a string, list, or array with values corresponding to columns in <code>expo.data</code> containing expected experience. More than one expected basis can be provided.</p>
<p><strong>Confidence intervals</strong></p>
<p>If <code>conf_int</code> is set to <code>True</code>, the output will contain lower and upper confidence interval limits for the observed termination rate and any actual-to-expected ratios. The confidence level is dictated by <code>conf_level</code>. If no weighting variable is passed to <code>wt</code>, confidence intervals will be constructed assuming a binomial distribution of claims. Otherwise, confidence intervals will be calculated assuming that the aggregate claims distribution is normal with a mean equal to observed claims and a variance equal to:</p>
<p><code>Var(S) = E(N) * Var(X) + E(X)**2 * Var(N)</code>,</p>
<p>Where <code>S</code> is the aggregate claim random variable, <code>X</code> is the weighting variable assumed to follow a normal distribution, and <code>N</code> is a binomial random variable for the number of claims.</p>
<p>If <code>credibility</code> is <code>True</code> and expected values are passed to <code>expected</code>, the output will also contain confidence intervals for any credibility-weighted termination rates.</p>
<p><strong>Credibility</strong></p>
<p>If <code>credibility</code> is set to <code>True</code>, the output will contain a <code>credibility</code> column equal to the partial credibility estimate under the Limited Fluctuation credibility method (also known as Classical Credibility) assuming a binomial distribution of claims.</p>
<p><strong>Alternative class constructor</strong></p>
<p><code>ExpStats.from_DataFrame()</code> can be used to coerce a data frame containing pre-aggregated experience into an <code>ExpStats</code> object. This is most useful for working with industry study data where individual exposure records are not available.</p>
</section>
<section id="see-also" class="level2">
<h2 class="anchored" data-anchor-id="see-also">See Also</h2>
<p>Herzog, Thomas (1999). Introduction to Credibility Theory</p>
</section>
<section id="methods" class="level2">
<h2 class="anchored" data-anchor-id="methods">Methods</h2>
<table class="table">
<thead>
<tr class="header">
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><a href="#actxps.exp_stats.ExpStats.from_DataFrame">from_DataFrame</a></td>
<td>Convert a data frame containing aggregate termination experience study</td>
</tr>
<tr class="even">
<td><a href="#actxps.exp_stats.ExpStats.plot">plot</a></td>
<td>Plot experience study results</td>
</tr>
<tr class="odd">
<td><a href="#actxps.exp_stats.ExpStats.plot_actual_to_expected">plot_actual_to_expected</a></td>
<td>Plot actual-to-expected termination rates for any expected termination</td>
</tr>
<tr class="even">
<td><a href="#actxps.exp_stats.ExpStats.plot_termination_rates">plot_termination_rates</a></td>
<td>Plot observed termination rates and any expected termination rates</td>
</tr>
<tr class="odd">
<td><a href="#actxps.exp_stats.ExpStats.summary">summary</a></td>
<td>Re-summarize termination experience data</td>
</tr>
<tr class="even">
<td><a href="#actxps.exp_stats.ExpStats.table">table</a></td>
<td>Tabular experience study summary</td>
</tr>
</tbody>
</table>
<section id="actxps.exp_stats.ExpStats.from_DataFrame" class="level3">
<h3 class="anchored" data-anchor-id="actxps.exp_stats.ExpStats.from_DataFrame">from_DataFrame</h3>
<p><code>exp_stats.ExpStats.from_DataFrame(data, target_status=None, expected=None, wt=None, conf_int=False, credibility=False, conf_level=0.95, cred_r=0.05, col_claims='claims', col_exposure='exposure', col_n_claims='n_claims', col_weight_sq='weight_sq', col_weight_n='weight_n', start_date=date(1900, 1, 1), end_date=None)</code></p>
<p>Convert a data frame containing aggregate termination experience study results to the <code>ExpStats</code> class.</p>
<p><code>from_DataFrame()</code> is most useful for working with aggregate summaries of experience that were not created by actxps where individual policy information is not available. After converting the data to the <code>ExpStats</code> class, <code>summary()</code> can be used to summarize data by any grouping variables, and <code>plot()</code> and <code>table()</code> are available for reporting.</p>
<section id="parameters-1" class="level4">
<h4 class="anchored" data-anchor-id="parameters-1">Parameters</h4>
<table class="table">
<colgroup>
<col style="width: 7%">
<col style="width: 22%">
<col style="width: 62%">
<col style="width: 8%">
</colgroup>
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>data</code></td>
<td>(polars.polars.DataFrame | pandas.pandas.DataFrame)</td>
<td>A DataFrame containing aggregate experience study results. See the Notes section for required columns that must be present.</td>
<td><em>required</em></td>
</tr>
<tr class="even">
<td><code>target_status</code></td>
<td>str | list | numpy.numpy.ndarray</td>
<td>Target status values</td>
<td><code>None</code></td>
</tr>
<tr class="odd">
<td><code>expected</code></td>
<td>str | list | numpy.numpy.ndarray</td>
<td>Column names in x with expected values.</td>
<td><code>None</code></td>
</tr>
<tr class="even">
<td><code>wt</code></td>
<td>str</td>
<td>Name of the column in <code>data</code> containing weights to use in the calculation of claims, exposures, partial credibility, and confidence intervals.</td>
<td><code>None</code></td>
</tr>
<tr class="odd">
<td><code>conf_int</code></td>
<td>bool</td>
<td>If <code>True</code>, future calls to <code>summary()</code> will include confidence intervals around the observed termination rates and any actual-to-expected ratios.</td>
<td><code>False</code></td>
</tr>
<tr class="even">
<td><code>credibility</code></td>
<td>bool</td>
<td>If <code>True</code>, future calls to <code>summary()</code> will include partial credibility weights and credibility-weighted termination rates.</td>
<td><code>False</code></td>
</tr>
<tr class="odd">
<td><code>conf_level</code></td>
<td>float</td>
<td>Confidence level used for the Limited Fluctuation credibility method and confidence intervals.</td>
<td><code>0.95</code></td>
</tr>
<tr class="even">
<td><code>cred_r</code></td>
<td>float</td>
<td>Error tolerance under the Limited Fluctuation credibility method.</td>
<td><code>0.05</code></td>
</tr>
<tr class="odd">
<td><code>col_claims</code></td>
<td>str</td>
<td>Name of the column in <code>data</code> containing claims.</td>
<td><code>'claims'</code></td>
</tr>
<tr class="even">
<td><code>col_exposure</code></td>
<td>str</td>
<td>Name of the column in <code>data</code> containing exposures.</td>
<td><code>'exposure'</code></td>
</tr>
<tr class="odd">
<td><code>col_n_claims</code></td>
<td>str</td>
<td>Only used used when <code>wt</code> is passed. Name of the column in <code>data</code> containing the number of claims.</td>
<td><code>'n_claims'</code></td>
</tr>
<tr class="even">
<td><code>col_weight_sq</code></td>
<td>default=’weight_sq</td>
<td>Only used used when <code>wt</code> is passed. Name of the column in <code>data</code> containing the sum of squared weights.</td>
<td><code>'weight_sq'</code></td>
</tr>
<tr class="odd">
<td><code>col_weight_n</code></td>
<td>str</td>
<td>Only used used when <code>wt</code> is passed. Name of the column in <code>data</code> containing exposure record counts.</td>
<td><code>'weight_n'</code></td>
</tr>
<tr class="even">
<td><code>start_date</code></td>
<td>datetime.date | str</td>
<td>Experience study start date</td>
<td><code>date(1900, 1, 1)</code></td>
</tr>
<tr class="odd">
<td><code>end_date</code></td>
<td>date | str: default=None</td>
<td>Experience study end date</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
</section>
<section id="returns" class="level4">
<h4 class="anchored" data-anchor-id="returns">Returns</h4>
<table class="table">
<thead>
<tr class="header">
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>actxps.exp_stats.ExpStats</td>
<td>An <code>ExpStats</code> object</td>
</tr>
</tbody>
</table>
</section>
<section id="notes-1" class="level4">
<h4 class="anchored" data-anchor-id="notes-1">Notes</h4>
<p>If nothing is passed to <code>wt</code>, the data frame <code>data</code> must include columns containing:</p>
<ul>
<li>Exposures (<code>exposure</code>)</li>
<li>Claim counts (<code>claims</code>)</li>
</ul>
<p>If <code>wt</code> is passed, the data must include columns containing:</p>
<ul>
<li>Weighted exposures (<code>exposure</code>)</li>
<li>Weighted claims (<code>claims</code>)</li>
<li>Claim counts (<code>n_claims</code>)</li>
<li>The raw sum of weights <strong>NOT</strong> multiplied by exposures</li>
<li>Exposure record counts (<code>.weight_n</code>)</li>
<li>The raw sum of squared weights (<code>.weight_sq</code>)</li>
</ul>
<p>The names in parentheses above are expected column names. If the data frame passed to <code>from_DataFrame()</code> uses different column names, these can be specified using the <code>col_*</code> arguments.</p>
<p>When a column name is passed to <code>wt</code>, the columns <code>.weight</code>, <code>.weight_n</code>, and <code>.weight_sq</code> are used to calculate credibility and confidence intervals. If credibility and confidence intervals aren’t required, then it is not necessary to pass anything to <code>wt</code>. The resulting <code>ExpStats</code> class and any downstream summaries will still be weighted as long as the exposures and claims are pre-weighted.</p>
<p><code>target_status</code>, <code>start_date</code>, and <code>end_date</code> are optional arguments that are only used for printing the resulting <code>ExpStats</code> object.</p>
</section>
<section id="examples" class="level4">
<h4 class="anchored" data-anchor-id="examples">Examples</h4>
<div class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> actxps <span class="im">as</span> xp</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># convert pre-aggregated experience into an ExpStats object</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>agg_sim_dat <span class="op">=</span> xp.load_agg_sim_dat()</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>dat <span class="op">=</span> xp.ExpStats.from_DataFrame(</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    agg_sim_dat,</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    col_exposure<span class="op">=</span><span class="st">"exposure_n"</span>,</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>    col_claims<span class="op">=</span><span class="st">"claims_n"</span>,</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>    target_status<span class="op">=</span><span class="st">"Surrender"</span>,</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>    start_date<span class="op">=</span><span class="dv">2005</span>,</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>    end_date<span class="op">=</span><span class="dv">2019</span>,</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>    conf_int<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="co"># summary by policy year</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>dat.summary(<span class="st">'pol_yr'</span>)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="co"># repeat the prior exercise on a weighted basis</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>dat_wt <span class="op">=</span> xp.ExpStats.from_DataFrame(</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>    agg_sim_dat, wt<span class="op">=</span><span class="st">"av"</span>,</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>    col_exposure<span class="op">=</span><span class="st">"exposure_amt"</span>,</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>    col_claims<span class="op">=</span><span class="st">"claims_amt"</span>,</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>    col_n_claims<span class="op">=</span><span class="st">"claims_n"</span>,</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>    col_weight_sq<span class="op">=</span><span class="st">"av_sq"</span>,</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>    col_weight_n<span class="op">=</span><span class="st">"n"</span>,</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>    target_status<span class="op">=</span><span class="st">"Surrender"</span>,</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>    start_date<span class="op">=</span><span class="dv">2005</span>, end_date<span class="op">=</span><span class="dv">2019</span>,</span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>    conf_int<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a><span class="co"># summary by policy year</span></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>dat_wt.summary(<span class="st">'pol_yr'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>Experience study results

Groups: pol_yr
Target status: Surrender
Study range: 2005 to 2019
Weighted by: av

shape: (15, 10)
┌────────┬──────────┬────────────┬────────────┬───┬────────────┬────────────┬───────────┬──────────┐
│ pol_yr ┆ n_claims ┆ claims     ┆ exposure   ┆ … ┆ q_obs_uppe ┆ weight     ┆ weight_sq ┆ weight_n │
│ ---    ┆ ---      ┆ ---        ┆ ---        ┆   ┆ r          ┆ ---        ┆ ---       ┆ ---      │
│ i64    ┆ i64      ┆ f64        ┆ f64        ┆   ┆ ---        ┆ f64        ┆ f64       ┆ i64      │
│        ┆          ┆            ┆            ┆   ┆ f64        ┆            ┆           ┆          │
╞════════╪══════════╪════════════╪════════════╪═══╪════════════╪════════════╪═══════════╪══════════╡
│ 1      ┆ 102      ┆ 83223.0    ┆ 2.5313e7   ┆ … ┆ 0.00465    ┆ 2.6301746e ┆ 6.0743e10 ┆ 19995    │
│        ┆          ┆            ┆            ┆   ┆            ┆ 7          ┆           ┆          │
│ 2      ┆ 160      ┆ 175428.0   ┆ 2.4019e7   ┆ … ┆ 0.009156   ┆ 2.4966449e ┆ 5.9628e10 ┆ 18434    │
│        ┆          ┆            ┆            ┆   ┆            ┆ 7          ┆           ┆          │
│ 3      ┆ 124      ┆ 132261.0   ┆ 2.2435e7   ┆ … ┆ 0.007699   ┆ 2.3442831e ┆ 5.7966e10 ┆ 16806    │
│        ┆          ┆            ┆            ┆   ┆            ┆ 7          ┆           ┆          │
│ 4      ┆ 168      ┆ 192473.0   ┆ 2.0860e7   ┆ … ┆ 0.011547   ┆ 2.1861723e ┆ 5.5707e10 ┆ 15266    │
│        ┆          ┆            ┆            ┆   ┆            ┆ 7          ┆           ┆          │
│ 5      ┆ 164      ┆ 197240.0   ┆ 1.9115e7   ┆ … ┆ 0.012911   ┆ 2.010467e7 ┆ 5.3381e10 ┆ 13618    │
│ …      ┆ …        ┆ …          ┆ …          ┆ … ┆ …          ┆ …          ┆ …         ┆ …        │
│ 11     ┆ 804      ┆ 1.153832e6 ┆ 7.6546e6   ┆ … ┆ 0.167253   ┆ 8.501473e6 ┆ 2.7564e10 ┆ 4897     │
│ 12     ┆ 330      ┆ 517875.0   ┆ 4.8959e6   ┆ … ┆ 0.123667   ┆ 5.713464e6 ┆ 1.9831e10 ┆ 3093     │
│ 13     ┆ 99       ┆ 179358.0   ┆ 3.1348e6   ┆ … ┆ 0.073083   ┆ 3.678776e6 ┆ 1.3003e10 ┆ 1937     │
│ 14     ┆ 62       ┆ 114390.0   ┆ 1.7270e6   ┆ … ┆ 0.090199   ┆ 2.343501e6 ┆ 8.8084e9  ┆ 1182     │
│ 15     ┆ 17       ┆ 26265.0    ┆ 520945.847 ┆ … ┆ 0.092475   ┆ 1.01939e6  ┆ 3.8514e9  ┆ 510      │
│        ┆          ┆            ┆ 496        ┆   ┆            ┆            ┆           ┆          │
└────────┴──────────┴────────────┴────────────┴───┴────────────┴────────────┴───────────┴──────────┘</code></pre>
</div>
</div>
</section>
<section id="see-also-1" class="level4">
<h4 class="anchored" data-anchor-id="see-also-1">See Also</h4>
<p><code>ExposedDF.exp_stats()</code> for information on how <code>ExpStats</code> objects are typically created from individual exposure records.</p>
</section>
</section>
<section id="actxps.exp_stats.ExpStats.plot" class="level3">
<h3 class="anchored" data-anchor-id="actxps.exp_stats.ExpStats.plot">plot</h3>
<p><code>exp_stats.ExpStats.plot(x=None, y='q_obs', color=None, facets=None, mapping=None, scales='fixed', geoms='lines', y_labels=lambda : [f'{v * 100}%' for v in l], y_log10=False, conf_int_bars=False)</code></p>
<p>Plot experience study results</p>
<section id="parameters-2" class="level4">
<h4 class="anchored" data-anchor-id="parameters-2">Parameters</h4>
<table class="table">
<colgroup>
<col style="width: 5%">
<col style="width: 7%">
<col style="width: 72%">
<col style="width: 14%">
</colgroup>
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>x</code></td>
<td>str</td>
<td>A column name in <code>data</code> to use as the <code>x</code> variable. If <code>None</code>, <code>x</code> will default to the first grouping variable. If there are no grouping variables, <code>x</code> will be set to “All”.</td>
<td><code>None</code></td>
</tr>
<tr class="even">
<td><code>y</code></td>
<td>str</td>
<td>A column name in <code>data</code> to use as the <code>y</code> variable.</td>
<td><code>'q_obs'</code></td>
</tr>
<tr class="odd">
<td><code>color</code></td>
<td>str</td>
<td>A column name in <code>data</code> to use as the <code>color</code> and <code>fill</code> variables. If <code>None</code>, <code>y</code> will default to the second grouping variable. If there are less than two grouping variables, the plot will not use a color aesthetic.</td>
<td><code>None</code></td>
</tr>
<tr class="even">
<td><code>facets</code></td>
<td>list | str</td>
<td>Faceting variables in <code>data</code> passed to <code>plotnine.facet_wrap()</code>. If <code>None</code>, grouping variables 3+ will be used (assuming there are more than two grouping variables).</td>
<td><code>None</code></td>
</tr>
<tr class="odd">
<td><code>mapping</code></td>
<td>plotnine.aes</td>
<td>Aesthetic mapping added to <code>plotnine.ggplot()</code>. NOTE: If <code>mapping</code> is supplied, the <code>x</code>, <code>y</code>, and <code>color</code> arguments will be ignored.</td>
<td><code>None</code></td>
</tr>
<tr class="even">
<td><code>scales</code></td>
<td>str</td>
<td>The <code>scales</code> argument passed to <code>plotnine.facet_wrap()</code>.</td>
<td><code>'fixed'</code></td>
</tr>
<tr class="odd">
<td><code>geoms</code></td>
<td>(lines, bars, points)</td>
<td>Type of geometry. If “lines” is passed, the plot will display lines and points. If “bars”, the plot will display bars. If “points”, the plot will display points only.</td>
<td><code>'lines'</code></td>
</tr>
<tr class="even">
<td><code>y_labels</code></td>
<td>callable</td>
<td>Label function passed to <code>plotnine.scale_y_continuous()</code>.</td>
<td><code>lambda l: [f"{v * 100:.1f}%" for v in l]</code></td>
</tr>
<tr class="odd">
<td><code>y_log10</code></td>
<td>bool</td>
<td>If <code>True</code>, the y-axes are plotted on a log-10 scale.</td>
<td><code>False</code></td>
</tr>
<tr class="even">
<td><code>conf_int_bars</code></td>
<td>bool</td>
<td>If <code>True</code>, confidence interval error bars are included in the plot. This option is only available for termination rates and actual-to-expected ratios.</td>
<td><code>False</code></td>
</tr>
</tbody>
</table>
</section>
<section id="notes-2" class="level4">
<h4 class="anchored" data-anchor-id="notes-2">Notes</h4>
<p>If no aesthetic map is supplied, the plot will use the first grouping variable in the <code>groups</code> property on the x axis and <code>q_obs</code> on the y axis. In addition, the second grouping variable in <code>groups</code> will be used for color and fill.</p>
<p>If no faceting variables are supplied, the plot will use grouping variables 3 and up as facets. These variables are passed into <code>plotnine.facet_wrap()</code>.</p>
</section>
<section id="examples-1" class="level4">
<h4 class="anchored" data-anchor-id="examples-1">Examples</h4>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> actxps <span class="im">as</span> xp</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>exp_res <span class="op">=</span> (xp.ExposedDF(xp.load_census_dat(),</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"2019-12-31"</span>, </span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>                        target_status<span class="op">=</span><span class="st">"Surrender"</span>).</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>           group_by(<span class="st">'pol_yr'</span>).</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>           exp_stats())</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>exp_res.plot()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="ExpStats_files/figure-html/cell-3-output-1.png" class="img-fluid"></p>
</div>
<div class="cell-output cell-output-display" data-execution_count="2">
<pre><code>&lt;Figure Size: (640 x 480)&gt;</code></pre>
</div>
</div>
</section>
</section>
<section id="actxps.exp_stats.ExpStats.plot_actual_to_expected" class="level3">
<h3 class="anchored" data-anchor-id="actxps.exp_stats.ExpStats.plot_actual_to_expected">plot_actual_to_expected</h3>
<p><code>exp_stats.ExpStats.plot_actual_to_expected(add_hline=True, **kwargs)</code></p>
<p>Plot actual-to-expected termination rates for any expected termination rates found in the <code>expected</code> property.</p>
<section id="parameters-3" class="level4">
<h4 class="anchored" data-anchor-id="parameters-3">Parameters</h4>
<table class="table">
<colgroup>
<col style="width: 13%">
<col style="width: 8%">
<col style="width: 67%">
<col style="width: 11%">
</colgroup>
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>add_hline</code></td>
<td>bool</td>
<td>If <code>True</code>, a blue dashed horizontal line will be drawn at 100%.</td>
<td><code>True</code></td>
</tr>
<tr class="even">
<td><code>**kwargs</code></td>
<td></td>
<td>Additional arguments passed to <code>plot()</code></td>
<td><code>{}</code></td>
</tr>
</tbody>
</table>
</section>
<section id="examples-2" class="level4">
<h4 class="anchored" data-anchor-id="examples-2">Examples</h4>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> actxps <span class="im">as</span> xp</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> polars <span class="im">as</span> pl        </span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>expo <span class="op">=</span> xp.ExposedDF(xp.load_census_dat(),</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"2019-12-31"</span>, </span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>                    target_status<span class="op">=</span><span class="st">"Surrender"</span>)</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>expected_table <span class="op">=</span> np.concatenate((np.linspace(<span class="fl">0.005</span>, <span class="fl">0.03</span>, <span class="dv">10</span>), </span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>                                 np.array([<span class="fl">0.2</span>, <span class="fl">0.15</span>]), </span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>                                 np.repeat(<span class="fl">0.05</span>, <span class="dv">3</span>)))</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>expo.data <span class="op">=</span> expo.data.with_columns(</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>    expected_1<span class="op">=</span>expected_table[expo.data[<span class="st">'pol_yr'</span>] <span class="op">-</span> <span class="dv">1</span>],</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>    expected_2<span class="op">=</span>pl.when(pl.col(<span class="st">'inc_guar'</span>)).then(<span class="fl">0.015</span>).otherwise(<span class="fl">0.03</span>)</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>exp_res <span class="op">=</span> (expo.</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>           group_by(<span class="st">'pol_yr'</span>).</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>           exp_stats(expected<span class="op">=</span>[<span class="st">'expected_1'</span>, <span class="st">'expected_2'</span>]))</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>exp_res.plot_actual_to_expected()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="ExpStats_files/figure-html/cell-4-output-1.png" class="img-fluid"></p>
</div>
<div class="cell-output cell-output-display" data-execution_count="3">
<pre><code>&lt;Figure Size: (640 x 480)&gt;</code></pre>
</div>
</div>
</section>
</section>
<section id="actxps.exp_stats.ExpStats.plot_termination_rates" class="level3">
<h3 class="anchored" data-anchor-id="actxps.exp_stats.ExpStats.plot_termination_rates">plot_termination_rates</h3>
<p><code>exp_stats.ExpStats.plot_termination_rates(include_cred_adj=False, **kwargs)</code></p>
<p>Plot observed termination rates and any expected termination rates found in the <code>expected</code> property.</p>
<section id="parameters-4" class="level4">
<h4 class="anchored" data-anchor-id="parameters-4">Parameters</h4>
<table class="table">
<colgroup>
<col style="width: 17%">
<col style="width: 6%">
<col style="width: 66%">
<col style="width: 9%">
</colgroup>
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>include_cred_adj</code></td>
<td>bool</td>
<td>If <code>True</code>, credibility-weighted termination rates will be plotted as well.</td>
<td><code>False</code></td>
</tr>
<tr class="even">
<td><code>**kwargs</code></td>
<td></td>
<td>Additional arguments passed to <code>plot()</code></td>
<td><code>{}</code></td>
</tr>
</tbody>
</table>
</section>
<section id="examples-3" class="level4">
<h4 class="anchored" data-anchor-id="examples-3">Examples</h4>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> actxps <span class="im">as</span> xp</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> polars <span class="im">as</span> pl</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>expo <span class="op">=</span> xp.ExposedDF(xp.load_census_dat(),</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"2019-12-31"</span>, </span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>                    target_status<span class="op">=</span><span class="st">"Surrender"</span>)</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>expected_table <span class="op">=</span> np.concatenate((np.linspace(<span class="fl">0.005</span>, <span class="fl">0.03</span>, <span class="dv">10</span>), </span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>                                 np.array([<span class="fl">0.2</span>, <span class="fl">0.15</span>]), </span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>                                 np.repeat(<span class="fl">0.05</span>, <span class="dv">3</span>)))</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>expo.data <span class="op">=</span> expo.data.with_columns(</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>    expected_1<span class="op">=</span>expected_table[expo.data[<span class="st">'pol_yr'</span>] <span class="op">-</span> <span class="dv">1</span>],</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>    expected_2<span class="op">=</span>pl.when(pl.col(<span class="st">'inc_guar'</span>)).then(<span class="fl">0.015</span>).otherwise(<span class="fl">0.03</span>)</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>exp_res <span class="op">=</span> (expo.</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>           group_by(<span class="st">'pol_yr'</span>).</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>           exp_stats(expected<span class="op">=</span>[<span class="st">'expected_1'</span>, <span class="st">'expected_2'</span>]))</span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>exp_res.plot_termination_rates()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="ExpStats_files/figure-html/cell-5-output-1.png" class="img-fluid"></p>
</div>
<div class="cell-output cell-output-display" data-execution_count="4">
<pre><code>&lt;Figure Size: (640 x 480)&gt;</code></pre>
</div>
</div>
</section>
</section>
<section id="actxps.exp_stats.ExpStats.summary" class="level3">
<h3 class="anchored" data-anchor-id="actxps.exp_stats.ExpStats.summary">summary</h3>
<p><code>exp_stats.ExpStats.summary(*by)</code></p>
<p>Re-summarize termination experience data</p>
<p>Re-summarize the data while retaining any grouping variables passed to the <code>*by</code> argument.</p>
<section id="parameters-5" class="level4">
<h4 class="anchored" data-anchor-id="parameters-5">Parameters</h4>
<table class="table">
<colgroup>
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 86%">
<col style="width: 5%">
</colgroup>
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>*by</code></td>
<td>tuple</td>
<td>Quoted column names in <code>data</code> that will be used as grouping variables in the re-summarized object. Passing nothing is acceptable and will produce a 1-row experience summary.</td>
<td><code>()</code></td>
</tr>
</tbody>
</table>
</section>
<section id="returns-1" class="level4">
<h4 class="anchored" data-anchor-id="returns-1">Returns</h4>
<table class="table">
<colgroup>
<col style="width: 27%">
<col style="width: 72%">
</colgroup>
<thead>
<tr class="header">
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>actxps.exp_stats.ExpStats</td>
<td>A new <code>ExpStats</code> object with rows for all the unique groups in <code>*by</code></td>
</tr>
</tbody>
</table>
</section>
<section id="examples-4" class="level4">
<h4 class="anchored" data-anchor-id="examples-4">Examples</h4>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> actxps <span class="im">as</span> xp</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>exp_res <span class="op">=</span> (xp.ExposedDF(xp.load_census_dat(),</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"2019-12-31"</span>, </span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>                        target_status<span class="op">=</span><span class="st">"Surrender"</span>).</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>           group_by(<span class="st">'pol_yr'</span>, <span class="st">'inc_guar'</span>).</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>           exp_stats())</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>exp_res.summary(<span class="st">'inc_guar'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="5">
<pre><code>Experience study results

Groups: inc_guar
Target status: Surrender
Study range: 1900-01-01 to 2019-12-31

shape: (2, 5)
┌──────────┬──────────┬────────┬──────────────┬──────────┐
│ inc_guar ┆ n_claims ┆ claims ┆ exposure     ┆ q_obs    │
│ ---      ┆ ---      ┆ ---    ┆ ---          ┆ ---      │
│ bool     ┆ u32      ┆ u32    ┆ f64          ┆ f64      │
╞══════════╪══════════╪════════╪══════════════╪══════════╡
│ false    ┆ 1601     ┆ 1601   ┆ 52123.236081 ┆ 0.030716 │
│ true     ┆ 1268     ┆ 1268   ┆ 80510.732091 ┆ 0.015749 │
└──────────┴──────────┴────────┴──────────────┴──────────┘</code></pre>
</div>
</div>
</section>
</section>
<section id="actxps.exp_stats.ExpStats.table" class="level3">
<h3 class="anchored" data-anchor-id="actxps.exp_stats.ExpStats.table">table</h3>
<p><code>exp_stats.ExpStats.table(fontsize=100, decimals=1, colorful=True, color_q_obs='GnBu', color_ae_='RdBu', show_conf_int=False, show_cred_adj=False, decimals_amt=0, suffix_amt=False, **rename_cols)</code></p>
<p>Tabular experience study summary</p>
<p>Convert experience study results to a presentation-friendly format.</p>
<section id="parameters-6" class="level4">
<h4 class="anchored" data-anchor-id="parameters-6">Parameters</h4>
<table class="table">
<colgroup>
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 87%">
<col style="width: 2%">
</colgroup>
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>fontsize</code></td>
<td>int</td>
<td>Font size percentage multiplier</td>
<td><code>100</code></td>
</tr>
<tr class="even">
<td><code>decimals</code></td>
<td>int</td>
<td>Number of decimals to display for percentages</td>
<td><code>1</code></td>
</tr>
<tr class="odd">
<td><code>colorful</code></td>
<td>bool</td>
<td>If <code>True</code>, color will be added to the the observed decrement rate and actual-to-expected columns.</td>
<td><code>True</code></td>
</tr>
<tr class="even">
<td><code>color_q_obs</code></td>
<td>str or colormap</td>
<td>ColorBrewer palette used for the observed decrement rate.</td>
<td><code>'GnBu'</code></td>
</tr>
<tr class="odd">
<td><code>color_ae_</code></td>
<td>str or colormap</td>
<td>ColorBrewer palette used for actual-to-expected rates.</td>
<td><code>'RdBu'</code></td>
</tr>
<tr class="even">
<td><code>show_conf_int</code></td>
<td>bool</td>
<td>If <code>True</code> any confidence intervals will be displayed.</td>
<td><code>False</code></td>
</tr>
<tr class="odd">
<td><code>show_cred_adj</code></td>
<td>bool</td>
<td>If <code>True</code> any credibility-weighted termination rates will be displayed.</td>
<td><code>False</code></td>
</tr>
<tr class="even">
<td><code>decimals_amt</code></td>
<td>int</td>
<td>Number of decimals to display for amount columns (number of claims, claim amounts, and exposures.</td>
<td><code>0</code></td>
</tr>
<tr class="odd">
<td><code>suffix_amt</code></td>
<td>bool</td>
<td>This argument has the same meaning as the <code>compact</code> argument in great_tables.gt.GT.fmt_number() for amount columns. If <code>False</code>, no scaling or suffixing are applied to amount columns. If <code>True</code>, all amount columns are automatically scaled and suffixed by “K” (thousands), “M” (millions), “B” (billions), or “T” (trillions).</td>
<td><code>False</code></td>
</tr>
<tr class="even">
<td><code>rename_cols</code></td>
<td>str</td>
<td>Key-value pairs where keys are column names and values are labels that will appear on the output table. This parameter is useful for renaming grouping variables that will appear under their original variable names if left unchanged.</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
</section>
<section id="notes-3" class="level4">
<h4 class="anchored" data-anchor-id="notes-3">Notes</h4>
<p>Further customizations can be added using great_tables.gt.GT methods. See the <code>great_tables</code> package documentation for more information.</p>
</section>
<section id="returns-2" class="level4">
<h4 class="anchored" data-anchor-id="returns-2">Returns</h4>
<table class="table">
<colgroup>
<col style="width: 67%">
<col style="width: 32%">
</colgroup>
<thead>
<tr class="header">
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>great_tables.great_tables.gt.great_tables.gt.GT</td>
<td>A formatted HTML table</td>
</tr>
</tbody>
</table>
</section>
<section id="examples-5" class="level4">
<h4 class="anchored" data-anchor-id="examples-5">Examples</h4>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> actxps <span class="im">as</span> xp</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> polars <span class="im">as</span> pl</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>expo <span class="op">=</span> xp.ExposedDF(xp.load_census_dat(),</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"2019-12-31"</span>, </span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>                    target_status<span class="op">=</span><span class="st">"Surrender"</span>)</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>expected_table <span class="op">=</span> np.concatenate((np.linspace(<span class="fl">0.005</span>, <span class="fl">0.03</span>, <span class="dv">10</span>), </span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>                                 np.array([<span class="fl">0.2</span>, <span class="fl">0.15</span>]), </span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>                                 np.repeat(<span class="fl">0.05</span>, <span class="dv">3</span>)))</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>expo.data <span class="op">=</span> expo.data.with_columns(</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>    expected_1<span class="op">=</span>expected_table[expo.data[<span class="st">'pol_yr'</span>] <span class="op">-</span> <span class="dv">1</span>],</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>    expected_2<span class="op">=</span>pl.when(pl.col(<span class="st">'inc_guar'</span>)).then(<span class="fl">0.015</span>).otherwise(<span class="fl">0.03</span>)</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>exp_res <span class="op">=</span> (expo.</span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>           group_by(<span class="st">'pol_yr'</span>).</span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>           exp_stats(expected<span class="op">=</span>[<span class="st">'expected_1'</span>, <span class="st">'expected_2'</span>],</span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>                     credibility<span class="op">=</span><span class="va">True</span>))</span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a>exp_res.table()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="6">

<div id="zhqvwglrhb" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>
#zhqvwglrhb table {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }

#zhqvwglrhb thead, tbody, tfoot, tr, td, th { border-style: none; }
#zhqvwglrhb p { margin: 0; padding: 0; }
 #zhqvwglrhb .gt_table { display: table; border-collapse: collapse; line-height: normal; margin-left: auto; margin-right: auto; color: #333333; font-size: 100%; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; }
 #zhqvwglrhb .gt_caption { padding-top: 4px; padding-bottom: 4px; }
 #zhqvwglrhb .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; }
 #zhqvwglrhb .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 3px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; }
 #zhqvwglrhb .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; }
 #zhqvwglrhb .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; }
 #zhqvwglrhb .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; }
 #zhqvwglrhb .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: bold; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; }
 #zhqvwglrhb .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: bold; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; }
 #zhqvwglrhb .gt_column_spanner_outer:first-child { padding-left: 0; }
 #zhqvwglrhb .gt_column_spanner_outer:last-child { padding-right: 0; }
 #zhqvwglrhb .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; }
 #zhqvwglrhb .gt_spanner_row { border-bottom-style: hidden; }
 #zhqvwglrhb .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; text-align: left; }
 #zhqvwglrhb .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; }
 #zhqvwglrhb .gt_from_md> :first-child { margin-top: 0; }
 #zhqvwglrhb .gt_from_md> :last-child { margin-bottom: 0; }
 #zhqvwglrhb .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; }
 #zhqvwglrhb .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; }
 #zhqvwglrhb .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; }
 #zhqvwglrhb .gt_row_group_first td { border-top-width: 2px; }
 #zhqvwglrhb .gt_row_group_first th { border-top-width: 2px; }
 #zhqvwglrhb .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; }
 #zhqvwglrhb .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; }
 #zhqvwglrhb .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; }
 #zhqvwglrhb .gt_left { text-align: left; }
 #zhqvwglrhb .gt_center { text-align: center; }
 #zhqvwglrhb .gt_right { text-align: right; font-variant-numeric: tabular-nums; }
 #zhqvwglrhb .gt_font_normal { font-weight: normal; }
 #zhqvwglrhb .gt_font_bold { font-weight: bold; }
 #zhqvwglrhb .gt_font_italic { font-style: italic; }
 #zhqvwglrhb .gt_super { font-size: 65%; }
 #zhqvwglrhb .gt_footnote_marks { font-size: 75%; vertical-align: 0.4em; position: initial; }
 #zhqvwglrhb .gt_asterisk { font-size: 100%; vertical-align: 0; }
 
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead class="gt_header">  <tr>
    <th colspan="9" class="gt_heading gt_title gt_font_normal">Experience Study Results
  </th></tr>
  <tr>
    <th colspan="9" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border">Target status: Surrender
  </th></tr></thead>
<tbody><tr class="gt_col_headings gt_spanner_row">
  <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="2" colspan="1" scope="col" id="pol_yr">pol_yr</th>
  <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="2" colspan="1" scope="col" id="Claims">Claims</th>
  <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="2" colspan="1" scope="col" id="Exposures">Exposures</th>
  <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="2" colspan="1" scope="col" id="<em>q<sup>obs</sup></em>"><em>q<sup>obs</sup></em></th>
  <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="<code>expected_1</code>">
    <span class="gt_column_spanner"><code>expected_1</code></span>
  </th>
  <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="<code>expected_2</code>">
    <span class="gt_column_spanner"><code>expected_2</code></span>
  </th>
  <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="2" colspan="1" scope="col" id="<em>Z<sup>cred</sup></em>"><em>Z<sup>cred</sup></em></th>
</tr>
<tr class="gt_col_headings">
  <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="<em>q<sup>exp</sup></em>"><em>q<sup>exp</sup></em></th>
  <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="<em>A/E</em>"><em>A/E</em></th>
  <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="<em>q<sup>exp</sup></em>"><em>q<sup>exp</sup></em></th>
  <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="<em>A/E</em>"><em>A/E</em></th>
</tr>
</tbody><tbody class="gt_table_body">
<tr>
  <td class="gt_row gt_center">1</td>
  <td class="gt_row gt_center">102</td>
  <td class="gt_row gt_right">19,252</td>
  <td style="color: #000000; background-color: #f7fcf0;" class="gt_row gt_right">0.5%</td>
  <td class="gt_row gt_right">0.5%</td>
  <td style="color: #FFFFFF; background-color: #1f63a8;" class="gt_row gt_right">106.0%</td>
  <td class="gt_row gt_right">2.1%</td>
  <td style="color: #FFFFFF; background-color: #053061;" class="gt_row gt_right">25.2%</td>
  <td class="gt_row gt_right">25.8%</td>
</tr>
<tr>
  <td class="gt_row gt_center">2</td>
  <td class="gt_row gt_center">160</td>
  <td class="gt_row gt_right">17,715</td>
  <td style="color: #000000; background-color: #f3fbed;" class="gt_row gt_right">0.9%</td>
  <td class="gt_row gt_right">0.8%</td>
  <td style="color: #FFFFFF; background-color: #2369ad;" class="gt_row gt_right">116.1%</td>
  <td class="gt_row gt_right">2.1%</td>
  <td style="color: #FFFFFF; background-color: #0a3b70;" class="gt_row gt_right">43.0%</td>
  <td class="gt_row gt_right">32.4%</td>
</tr>
<tr>
  <td class="gt_row gt_center">3</td>
  <td class="gt_row gt_center">124</td>
  <td class="gt_row gt_right">16,097</td>
  <td style="color: #000000; background-color: #f5fbee;" class="gt_row gt_right">0.8%</td>
  <td class="gt_row gt_right">1.1%</td>
  <td style="color: #FFFFFF; background-color: #144e8a;" class="gt_row gt_right">73.0%</td>
  <td class="gt_row gt_right">2.1%</td>
  <td style="color: #FFFFFF; background-color: #08366a;" class="gt_row gt_right">36.7%</td>
  <td class="gt_row gt_right">28.5%</td>
</tr>
<tr>
  <td class="gt_row gt_center">4</td>
  <td class="gt_row gt_center">168</td>
  <td class="gt_row gt_right">14,536</td>
  <td style="color: #000000; background-color: #f1f9ea;" class="gt_row gt_right">1.2%</td>
  <td class="gt_row gt_right">1.3%</td>
  <td style="color: #FFFFFF; background-color: #195696;" class="gt_row gt_right">86.7%</td>
  <td class="gt_row gt_right">2.1%</td>
  <td style="color: #FFFFFF; background-color: #0e4179;" class="gt_row gt_right">55.1%</td>
  <td class="gt_row gt_right">33.3%</td>
</tr>
<tr>
  <td class="gt_row gt_center">5</td>
  <td class="gt_row gt_center">164</td>
  <td class="gt_row gt_right">12,916</td>
  <td style="color: #000000; background-color: #f0f9e9;" class="gt_row gt_right">1.3%</td>
  <td class="gt_row gt_right">1.6%</td>
  <td style="color: #FFFFFF; background-color: #175290;" class="gt_row gt_right">78.8%</td>
  <td class="gt_row gt_right">2.1%</td>
  <td style="color: #FFFFFF; background-color: #10457e;" class="gt_row gt_right">60.7%</td>
  <td class="gt_row gt_right">32.9%</td>
</tr>
<tr>
  <td class="gt_row gt_center">6</td>
  <td class="gt_row gt_center">152</td>
  <td class="gt_row gt_right">11,376</td>
  <td style="color: #000000; background-color: #eff9e9;" class="gt_row gt_right">1.3%</td>
  <td class="gt_row gt_right">1.9%</td>
  <td style="color: #FFFFFF; background-color: #134c87;" class="gt_row gt_right">70.7%</td>
  <td class="gt_row gt_right">2.1%</td>
  <td style="color: #FFFFFF; background-color: #114781;" class="gt_row gt_right">63.9%</td>
  <td class="gt_row gt_right">31.7%</td>
</tr>
<tr>
  <td class="gt_row gt_center">7</td>
  <td class="gt_row gt_center">164</td>
  <td class="gt_row gt_right">9,917</td>
  <td style="color: #000000; background-color: #ebf7e5;" class="gt_row gt_right">1.7%</td>
  <td class="gt_row gt_right">2.2%</td>
  <td style="color: #FFFFFF; background-color: #15508d;" class="gt_row gt_right">76.3%</td>
  <td class="gt_row gt_right">2.1%</td>
  <td style="color: #FFFFFF; background-color: #175290;" class="gt_row gt_right">79.1%</td>
  <td class="gt_row gt_right">32.9%</td>
</tr>
<tr>
  <td class="gt_row gt_center">8</td>
  <td class="gt_row gt_center">190</td>
  <td class="gt_row gt_right">8,448</td>
  <td style="color: #000000; background-color: #e6f5e0;" class="gt_row gt_right">2.2%</td>
  <td class="gt_row gt_right">2.4%</td>
  <td style="color: #FFFFFF; background-color: #1a5899;" class="gt_row gt_right">92.0%</td>
  <td class="gt_row gt_right">2.1%</td>
  <td style="color: #FFFFFF; background-color: #1f63a8;" class="gt_row gt_right">107.9%</td>
  <td class="gt_row gt_right">35.6%</td>
</tr>
<tr>
  <td class="gt_row gt_center">9</td>
  <td class="gt_row gt_center">181</td>
  <td class="gt_row gt_right">6,960</td>
  <td style="color: #000000; background-color: #e2f4dd;" class="gt_row gt_right">2.6%</td>
  <td class="gt_row gt_right">2.7%</td>
  <td style="color: #FFFFFF; background-color: #1c5c9f;" class="gt_row gt_right">95.5%</td>
  <td class="gt_row gt_right">2.1%</td>
  <td style="color: #FFFFFF; background-color: #266caf;" class="gt_row gt_right">125.1%</td>
  <td class="gt_row gt_right">34.8%</td>
</tr>
<tr>
  <td class="gt_row gt_center">10</td>
  <td class="gt_row gt_center">152</td>
  <td class="gt_row gt_right">5,604</td>
  <td style="color: #000000; background-color: #e1f3dc;" class="gt_row gt_right">2.7%</td>
  <td class="gt_row gt_right">3.0%</td>
  <td style="color: #FFFFFF; background-color: #1a5899;" class="gt_row gt_right">90.4%</td>
  <td class="gt_row gt_right">2.1%</td>
  <td style="color: #FFFFFF; background-color: #2870b1;" class="gt_row gt_right">130.6%</td>
  <td class="gt_row gt_right">31.9%</td>
</tr>
<tr>
  <td class="gt_row gt_center">11</td>
  <td class="gt_row gt_center">804</td>
  <td class="gt_row gt_right">4,390</td>
  <td style="color: #FFFFFF; background-color: #084081;" class="gt_row gt_right">18.3%</td>
  <td class="gt_row gt_right">20.0%</td>
  <td style="color: #FFFFFF; background-color: #1a5899;" class="gt_row gt_right">91.6%</td>
  <td class="gt_row gt_right">2.1%</td>
  <td style="color: #FFFFFF; background-color: #67001f;" class="gt_row gt_right">881.0%</td>
  <td class="gt_row gt_right">80.0%</td>
</tr>
<tr>
  <td class="gt_row gt_center">12</td>
  <td class="gt_row gt_center">330</td>
  <td class="gt_row gt_right">2,663</td>
  <td style="color: #000000; background-color: #42a6cc;" class="gt_row gt_right">12.4%</td>
  <td class="gt_row gt_right">15.0%</td>
  <td style="color: #FFFFFF; background-color: #185493;" class="gt_row gt_right">82.6%</td>
  <td class="gt_row gt_right">2.0%</td>
  <td style="color: #000000; background-color: #f5a886;" class="gt_row gt_right">618.2%</td>
  <td class="gt_row gt_right">49.5%</td>
</tr>
<tr>
  <td class="gt_row gt_center">13</td>
  <td class="gt_row gt_center">99</td>
  <td class="gt_row gt_right">1,620</td>
  <td style="color: #000000; background-color: #bae4bd;" class="gt_row gt_right">6.1%</td>
  <td class="gt_row gt_right">5.0%</td>
  <td style="color: #FFFFFF; background-color: #266caf;" class="gt_row gt_right">122.2%</td>
  <td class="gt_row gt_right">2.0%</td>
  <td style="color: #000000; background-color: #a7d0e4;" class="gt_row gt_right">310.9%</td>
  <td class="gt_row gt_right">26.2%</td>
</tr>
<tr>
  <td class="gt_row gt_center">14</td>
  <td class="gt_row gt_center">62</td>
  <td class="gt_row gt_right">872</td>
  <td style="color: #000000; background-color: #aadeb6;" class="gt_row gt_right">7.1%</td>
  <td class="gt_row gt_right">5.0%</td>
  <td style="color: #FFFFFF; background-color: #2e77b5;" class="gt_row gt_right">142.2%</td>
  <td class="gt_row gt_right">2.0%</td>
  <td style="color: #000000; background-color: #cfe4ef;" class="gt_row gt_right">364.3%</td>
  <td class="gt_row gt_right">20.8%</td>
</tr>
<tr>
  <td class="gt_row gt_center">15</td>
  <td class="gt_row gt_center">17</td>
  <td class="gt_row gt_right">268</td>
  <td style="color: #000000; background-color: #b6e3bb;" class="gt_row gt_right">6.3%</td>
  <td class="gt_row gt_right">5.0%</td>
  <td style="color: #FFFFFF; background-color: #276eb0;" class="gt_row gt_right">126.8%</td>
  <td class="gt_row gt_right">1.9%</td>
  <td style="color: #000000; background-color: #b6d7e8;" class="gt_row gt_right">331.2%</td>
  <td class="gt_row gt_right">10.9%</td>
</tr>
</tbody>
  <tfoot class="gt_sourcenotes">
  
  <tr>
    <td class="gt_sourcenote" colspan="9">Study range: 1900-01-01 to 2019-12-31</td>
  </tr>

</tfoot>

</table>

</div>
        
</div>
</div>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>